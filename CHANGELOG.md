# 更新日志

本文档记录了 Vue Cesium Ultimate 项目的版本更新历史。

## [v1.2.7] - 2024-12-19

### 🐛 Bug 修复
- 修复 `DynamicTextureShader` 中的 GLSL 语法错误
  - 将 `texture()` 函数改为 `texture2D()` 以兼容 WebGL 1.0
  - 修复 `fragColor` 变量未完全初始化的问题
  - 优化着色器代码结构，直接使用 `color.rgb` 设置材质属性

- 修复材质系统注册问题
  - 取消 `manager.js` 中 `PolylineDynamicTexture` 材质类型的注释
  - 修复 `addMaterial` 函数中 `Cesium` 对象未定义的问题
  - 添加 `const Cesium = window.Cesium` 确保正确引用 Cesium API

### ✨ 功能优化
- 重构材质属性类的代码结构
  - 统一 `DynamicTextureMaterialProperty`、`ParabolaFlyLineMaterialProperty` 和 `PulseLineMaterialProperty` 的实现模式
  - 添加默认值常量定义，提高代码可维护性
  - 将材质注册逻辑从构造函数分离到独立的初始化方法

- 添加材质初始化保护机制
  - 为所有材质初始化方法添加重复定义判断
  - 使用 `hasOwnProperty` 检查避免重复注册属性描述符
  - 提高系统稳定性和容错能力

### 🔧 代码改进
- 统一代码风格和结构
- 优化错误处理机制
- 改进材质系统的初始化流程
- 增强代码的健壮性和可维护性

### 📝 文档更新
- 更新版本号到 v1.2.7
- 完善版本历史记录
- 创建详细的更新日志文档

---

## [v1.2.6] - 2024-12
### 🧹 代码清理优化
- 代码结构优化和清理

## [v1.2.5] - 2024-12
### 🏗️ 代码结构优化
- 优化项目代码结构

## [v1.2.4] - 2024-12
### ⚙️ 配置管理优化
- 优化配置管理系统

## [v1.2.3] - 2024-12
### 🔧 代码重构与错误修复
- 代码重构和bug修复

## [v1.2.2] - 2024-12
### 🔀 组件合并与优化
- 组件合并和系统优化

## [v1.2.1] - 2024-11
### 🎨 材质控制系统重构
- 材质控制系统重构

## [v1.2.0] - 2024-11
### 🏗️ 组件化重构第一阶段
- 组件化重构第一阶段完成

## [v1.1.0] - 2024-11
### ✨ 抛物线工具和MaterialProperty系统
- 新增抛物线工具
- 实现MaterialProperty系统

## [v1.0.0] - 2024-10
### 🎉 初始版本
- 基础地图可视化功能
- 项目初始化

---

## 图例说明

- 🎉 新功能
- ✨ 功能优化
- 🐛 Bug 修复
- 🔧 代码改进
- 🏗️ 重构
- 📝 文档更新
- 🧹 代码清理
- ⚙️ 配置优化
- 🔀 合并优化
- 🎨 样式/UI 改进